<div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col" id="note-<%= note._id %>">

    <%# Display cover image if available %>
    <% if (note.coverPath) { %>
    <img src="<%= note.coverPath %>" alt="<%= note.title %> Cover Image" class="w-full h-40 object-cover">
    <% } %>

    <div class="p-5 flex-grow flex flex-col">
    <%# Note Header: Title and Pinned Status %>
    <div class="flex justify-between items-start mb-2">
        <h2 class="text-xl font-semibold text-gray-900 flex-grow mr-2"><%= note.title %></h2>
        <%# Display pinned status if true %>
        <% if (note.isPinned) { %>
        <span class="flex-shrink-0 bg-yellow-200 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">Pinned</span>
        <% } %>
    </div>

    <%# Note Content - preserve whitespace and newlines %>
    <p class="text-gray-700 mb-4 whitespace-pre-wrap flex-grow"><%= note.content %></p>

    <%# Note Tags %>
    <% if (note.tags && note.tags.length > 0) { %>
        <div class="mb-4">
        <% note.tags.forEach(tag => { %>
            <span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium mr-2 mb-2 px-2.5 py-0.5 rounded-full"><%= tag %></span>
        <% }); %>
        </div>
    <% } %>

    <%# Note Footer: Timestamps %>
    <div class="mt-auto pt-4 border-t border-gray-200 text-xs text-gray-500">
        <%# Format dates for better readability %>
        <p>Created: <%= new Date(note.createdAt).toLocaleString() %></p>
        <p>Updated: <%= new Date(note.updatedAt).toLocaleString() %></p>
    </div>
    </div>
</div>